{"version":3,"file":"bundle.umd.cjs","sources":["../../templates/components/common/description.js","../../templates/components/common/validator.js","../../templates/components/common/wrapper.js","../../templates/const.js","../../templates/utils.js","../../templates/components/params/params.js","../../templates/components/publishers/publishers.js","../../templates/components/subscribers/subscribers.js","../../templates/dom-helper.js","../../templates/unload.js"],"sourcesContent":["/**\n * DescriptionFieldへのテキスト表示用イベントリスナー\n **/\n\n// CSVファイルのキャッシュ\nglobalThis.jsonCache = {};\n\nasync function loadJsonFile(filepath) {\n  var filename = filepath.replace(\".csv\", \"\");\n\n  if (jsonCache[filename]) {\n    return jsonCache[filename];\n  }\n\n  try {\n    const res = await fetch(`/${filename}.json`);\n    const data = await res.json();\n    jsonCache[filename] = data;\n    return data;\n  } catch (e) {\n    console.error(\"Error loading JSON:\", e);\n    return null;\n  }\n}\n\nasync function updateDescription(payload) {\n  const { element, detail } = payload;\n  if (!detail) {\n    return;\n  }\n  const { rowId, csvFilename } = detail;\n  console.log(\"updateDescription\", detail);\n  if (!rowId) {\n    return;\n  }\n  if (!csvFilename) {\n    return;\n  }\n\n  const jsonData = await loadJsonFile(csvFilename);\n  if (!jsonData) {\n    console.error(\n      \"No description available: CSV file not found. This is caused by missing CSV file, failed to convert to JSON, or failed to load from cache.\"\n    );\n    return;\n  }\n\n  const rowData = jsonData.find((row) => row.id === rowId);\n  if (!rowData) {\n    console.error(\"No description available: Row not found\");\n    return;\n  }\n\n  // テキスト更新\n  // クラス名にdescription-fieldが指定されている要素を取得してテキストを更新する\n  const fields = element.querySelectorAll(\".description-field\");\n  fields.forEach((field) => {\n    field.textContent = rowData[field.dataset.columnName];\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", (e) => {\n  var elements = document.getElementsByClassName(\"description\");\n  for (const el of elements) {\n    domUpdateHelper.registerCallback(el, updateDescription);\n\n    const eventName = el.dataset.eventName;\n    document.addEventListener(eventName, (event) => {\n      const payload = {\n        detail: event.detail,\n      };\n      domUpdateHelper.executeCallbacks(el, payload);\n    });\n  }\n});","/**\n * Validatorラッパー\n */\nfunction initValidator(inputElement, errorFieldElement) {\n  const name = inputElement.name;\n  const schema = global.schemas[name];\n  console.log(name, schema);\n  if (!schema) {\n    console.error(`No schema found for ${name}`);\n    return;\n  }\n  inputElement.addEventListener(\"input\", (event) => {\n    console.log(event);\n    const value = event.target.value;\n    const result = validate(value, schema);\n    if (result.valid) {\n      event.target.classList.remove(\"invalid\");\n      if (errorFieldElement) {\n        errorFieldElement.textContent = \"\";\n      }\n    } else {\n      event.target.classList.add(\"invalid\");\n      if (errorFieldElement) {\n        errorFieldElement.textContent = result.message;\n      }\n    }\n  });\n}\n\nfunction validate(value, schema) {\n  try {\n    schema.parse(value);\n    const result = {\n      valid: true,\n      message: \"\",\n    };\n    return result;\n  } catch (e) {\n    const errorMessage = error.errors[0]?.message || \"入力が無効です\";\n    const result = {\n      valid: false,\n      message: errorMessage,\n    };\n    return result;\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", (event) => {\n  var elements = document.getElementsByClassName(\"validator-wrapper\");\n  for (const el of elements) {\n    // validator-wrapperはdivタグなので、このdivタグの子要素のinputタグを取得する\n    const inputElement = el.querySelector(\"input\");\n    // エラー表示フィールドがあれば、そこにバリデーションエラーメッセージを表示する\n    const errorFieldElement = el.querySelector(\".validation-error\");\n    if (!inputElement) {\n      console.error(\"No input element found in validator-wrapper\", el);\n      continue;\n    }\n    initValidator(inputElement, errorFieldElement);\n  }\n});","/**\n * イベントディスパッチャー追加のためのラッパーコンポーネント用関数\n */\n\nfunction dispatchWrappedEvent(originalEvent, customEventName) {\n  // イベントターゲットがevent-wrapperクラスを持っている場合はイベント発行を行わない\n  const target = originalEvent.target;\n  if (target.classList.contains(\"event-wrapper\")) {\n    return;\n  }\n  // // ラッパーコンポーネントに最も近いタグが持つdata-*を取得\n  // const isWrappedElement = target.closest(\".event-wrapper\") !== null;\n  // if (!isWrappedElement) return;\n\n  const detail = { ...target.dataset };\n  const customEvent = new CustomEvent(customEventName, {\n    bubbles: true,\n    detail,\n  });\n  document.dispatchEvent(customEvent);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const clickWrappers = document.getElementsByClassName(\"click-wrapper\");\n  for(const wrapper of clickWrappers) {\n    const eventName = wrapper.dataset.eventName;\n    wrapper.addEventListener(\"click\", (e) => dispatchWrappedEvent(e, eventName));\n  }\n  const hoverWrappers = document.getElementsByClassName(\"hover-wrapper\");\n  for(const wrapper of hoverWrappers) {\n    const eventName = wrapper.dataset.eventName;\n    wrapper.addEventListener(\"mouseover\", (e) => dispatchWrappedEvent(e, eventName));\n  }\n  const leaveWrappers = document.getElementsByClassName(\"leave-wrapper\");\n  for(const wrapper of leaveWrappers) {\n    const eventName = wrapper.dataset.eventName;\n    wrapper.addEventListener(\"mouseout\", (e) => dispatchWrappedEvent(e, eventName));\n  }\n});","globalThis.PARAM_TYPES = {\n  Bool: \"Bool\",\n  Number: \"Number\",\n  String: \"String\",\n  Object: \"Object\",\n  Array: \"Array\",\n}\n","globalThis.Utils = {\n  EvalGetValue: function(value, key) {\n    let v;\n    eval(\"v = value\" + key);\n    return v;\n  },\n  EvalSetValue: function(value, key, newValue) {\n    let v = structuredClone(value);\n    eval(\"v\" + key + \" = newValue\");\n    return v;\n  },\n  /**\n   * 辞書キーのフルパス指定して値追加\n   * @param {*} dict \n   * @param {*} key: .options.data.meta[0] のようなフルパス\n   * @param {*} value \n   * @returns dict\n   */\n  dictFullPathAdd: function(dict, key_fullpath, value) {\n    let result = structuredClone(dict);\n    let current = result;\n    // 一番最初の.は無視\n    if (key_fullpath.startsWith('.')) {\n      key_fullpath = key_fullpath.slice(1);\n    }\n\n    // パスを分割して階層構造を作成\n    const pathParts = key_fullpath.split('.');\n\n    pathParts.forEach((part, index) => {\n      // 配列のインデックスを処理\n      const arrayMatch = part.match(/(\\w+)\\[(\\d+)\\]/);\n\n      if (arrayMatch) {\n        // 配列の場合\n        const [_, arrayName, arrayIndex] = arrayMatch;\n        if (!current[arrayName]) {\n          current[arrayName] = [];\n        }\n\n        if (index === pathParts.length - 1) {\n          // 最後の要素の場合は値を設定\n          current[arrayName][arrayIndex] = value;\n        } else {\n          // 途中の要素の場合は空オブジェクトを作成\n          if (!current[arrayName][arrayIndex]) {\n            current[arrayName][arrayIndex] = {};\n          }\n          current = current[arrayName][arrayIndex];\n        }\n      } else {\n        // 通常のオブジェクトの場合\n        if (index === pathParts.length - 1) {\n          // 最後の要素の場合は値を設定\n          current[part] = value;\n        } else {\n          // 途中の要素の場合は空オブジェクトを作成\n          if (!current[part]) {\n            current[part] = {};\n          }\n          current = current[part];\n        }\n      }\n    });\n\n    return result;\n  }\n}","/**\n * ROS Parameters\n **/\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  /**\n   * ROSPARAMの必須属性\n   * - class=\"rosparam\"\n   * - name=\"[/param_name]\"\n   * - data-rtype=\"[PARAM_TYPES]\"\n   */\n  const paramElements = document.getElementsByClassName(\"rosparam\");\n  for (const element of paramElements) {\n    /**\n     * HTMLタグバリデータ\n     */\n    console.assert(element.getAttribute(\"name\") !== null, \"Parameterのname属性が必要です.\");\n    const name = element.getAttribute(\"name\");\n\n    /**\n     * ROSParamのポーリング登録\n     */\n    const event = new CustomEvent(ROS_EVENTS.Param, {\n      detail: { name },\n    });\n    document.dispatchEvent(event);\n\n    /**\n     * DOM更新方法の登録\n     */\n    if (element.hasAttribute(\"update-custom\")) {\n      // 特殊なコールバックが必要な場合は、update-custom属性を設定する\n      continue;\n    }\n\n    // rosparamのデータを受信した際のデフォルトDOM更新処理\n    domUpdateHelper.registerCallback(element, domUpdateHelper.updateElement);\n\n\n    /** ROSPARAM SETTER */\n    if (element.tagName === \"DIV\") {\n      const inputs = element.querySelectorAll(\"input\");\n      for (const input of inputs) {\n        input.addEventListener(\"change\", async (e) => {\n          const value = e.currentTarget.value;\n          const key = e.currentTarget.getAttribute(\"data-key\");\n          const obj = await ROSInterface.getParam(name);\n          const event = new CustomEvent(ROS_EVENTS.ParamSet, {\n            detail: {\n              name,\n              type: PARAM_TYPES.Object,\n              value: Utils.EvalSetValue(obj, key, value)\n            },\n          });\n          document.dispatchEvent(event);\n        });\n      }\n    }\n\n    if (element.tagName === \"SELECT\") {\n      element.addEventListener(\"change\", async (e) => {\n        const value = e.currentTarget.value;\n        const event = new CustomEvent(ROS_EVENTS.ParamSet, {\n          detail: {\n            name,\n            type: PARAM_TYPES.Number,\n            value\n          },\n        });\n        document.dispatchEvent(event);\n      });\n    }\n\n    if (element.tagName === \"INPUT\") {\n      if (element.type === \"checkbox\") {\n        element.addEventListener(\"change\", async (e) => {\n          const value = e.currentTarget.checked;\n          const event = new CustomEvent(ROS_EVENTS.ParamSet, {\n            detail: {\n              name,\n              type: PARAM_TYPES.Bool,\n              value\n            },\n          });\n          document.dispatchEvent(event);\n        });\n      }\n      else if (element.type === \"radio\") {\n        element.addEventListener(\"change\", async (e) => {\n          const value = e.currentTarget.value;\n          const event = new CustomEvent(ROS_EVENTS.ParamSet, {\n            detail: {\n              name,\n              type: PARAM_TYPES.Number,\n              value\n            },\n          });\n          document.dispatchEvent(event);\n        });\n      }\n      else if (element.type === \"text\") {\n        element.addEventListener(\"change\", async (e) => {\n          const value = e.currentTarget.value;\n          const event = new CustomEvent(ROS_EVENTS.ParamSet, {\n            detail: {\n              name,\n              type: PARAM_TYPES.String,\n              value\n            },\n          });\n          document.dispatchEvent(event);\n        });\n      } else {\n        element.addEventListener(\"change\", async (e) => {\n          const value = e.currentTarget.value;\n          const event = new CustomEvent(ROS_EVENTS.ParamSet, {\n            detail: {\n              name,\n              type: PARAM_TYPES.Number,\n              value\n            },\n          });\n          document.dispatchEvent(event);\n        });\n      }\n    }\n  }\n\n  /**\n   * DOM更新イベントの登録\n   */\n  document.addEventListener(ROS_EVENTS.ParamUpdated, async (e) => {\n    const { name, value } = e.detail;\n\n    const paramElements = document.querySelectorAll(`[name=\"${name}\"][class=\"rosparam\"]`); \n    for(var i = 0; i < paramElements.length; i++) {\n      domUpdateHelper.executeCallbacks(paramElements[i], { value });\n    }\n  });\n});","/**\n * ROS PUBLISHER\n **/\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  /**\n   * Publisherの必須属性\n   * - class=\"publish\"\n   * - name=\"[/topic_name]\"\n   * - ext=\"ROS_MESSAGE\"\n   * - value=\"[value]\"\n   */\n  const publishes = document.getElementsByClassName(\"publish\");\n  for (const pub of publishes) {\n    /**\n     * HTMLタグバリデータ\n     */\n    const name = pub.getAttribute(\"name\");\n    console.assert(name, \"Publisherのname属性が必要です\");\n    const type = pub.getAttribute(\"m-type\");\n    console.assert(type, `Publisherのext属性が必要です`);\n    console.assert(pub.tagName === \"DIV\", \"PublisherはDIVタグである必要があります\");\n    if (pub.tagName !== \"DIV\") {\n      continue;\n    }\n    const btn = pub.querySelector(\"button\");\n    console.assert(btn, \"Publisherはbuttonタグを含む必要があります\");\n    const inputs = pub.querySelectorAll(\"input\");\n    console.assert(inputs.length > 0, \"Publisherはinputタグを含む必要があります\");\n\n\n    btn.addEventListener(\"click\", async (e) => {\n      let value = {};\n      // inputタグのvalueを取得して辞書化\n      inputs.forEach((input) => {\n        const ext = input.getAttribute(\"ext\");\n        if (!ext) return;\n        var type_asserted;\n        if(input.type == \"checkbox\"){\n          type_asserted = input.checked;\n        } else if(input.type == \"number\"){\n          type_asserted = Number(input.value);\n        } else if(input.type == \"radio\"){\n          type_asserted = Number(input.value);\n        } else {\n          type_asserted = input.value;\n        }\n        value = Utils.dictFullPathAdd(value, ext, type_asserted);\n      });\n      const event = new CustomEvent(ROS_EVENTS.Publish, {\n        detail: { name, type, value },\n      });\n      document.dispatchEvent(event);\n    });\n  }\n});","/**\n * ROS SUBSCRIBER\n **/\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  /**\n   * Subscriberの必須属性\n   *  - class=\"subscribe\"\n   *  - name=\"[/topic_name]\"\n   *  - data-rtype=\"[MSG_TYPES]\"\n   */\n  const subscribeElements = document.getElementsByClassName(\"subscribe\");\n  for (const element of subscribeElements) {\n    /**\n     * HTMLタグバリデータ\n     */\n    const name = element.getAttribute(\"name\");\n    console.assert(name, \"Subscriberのname属性が必要です.\");\n    const type = element.getAttribute(\"m-type\");\n    console.assert(type, \"Subscriberのm-type属性が必要です.\");\n    console.assert(element.tagName === \"DIV\", \"SubscriberはDIVタグである必要があります.\");\n    if (element.tagName !== \"DIV\") {\n      continue;\n    }\n\n    /**\n     * SubscriberをROSに登録\n     */\n    const event = new CustomEvent(ROS_EVENTS.Subscribe, {\n      detail: { name, type },\n    });\n    document.dispatchEvent(event);\n\n    /**\n     * DOM更新方法の登録\n     */\n    if (element.hasAttribute(\"update-custom\")) {\n      // 特殊なDOM更新処理が必要な場合は、data-update-custom属性を設定する\n      continue;\n    }\n\n    // Subscribeしたデータを受信した際のデフォルトDOM更新処理\n    domUpdateHelper.registerCallback(element, domUpdateHelper.updateElement);\n  }\n\n  /**\n   * DOM更新イベントの登録\n   */\n  document.addEventListener(ROS_EVENTS.SubscribedValue, async (e) => {\n    const { name, value } = e.detail;\n    const topicElements = document.querySelectorAll(`[name=\"${name}\"][class=\"subscribe\"]`); \n    for(var i = 0; i < topicElements.length; i++) {\n      domUpdateHelper.executeCallbacks(topicElements[i], { value });\n    };\n  });\n});","class DOMUpdateHelper {\n  static updateCallbacks = new WeakMap();\n\n  /**\n   * DOM更新コールバックの登録\n   * @param {*} element\n   * @param {*} callback: ({ element, ...payload }) => { ... }\n   */\n  static registerCallback(element, callback) {\n    if (DOMUpdateHelper.updateCallbacks.has(element)) {\n      DOMUpdateHelper.updateCallbacks.get(element).push(callback);\n    } else {\n      DOMUpdateHelper.updateCallbacks.set(element, [callback]);\n    }\n  }\n\n  /**\n   * DOM更新コールバックの実行\n   * @param {*} element\n   * @param {*} payload\n   */\n  static executeCallbacks(element, payload) {\n    if (DOMUpdateHelper.updateCallbacks.has(element)) {\n      DOMUpdateHelper.updateCallbacks.get(element).forEach((callback) => {\n        callback({ element, ...payload });\n      });\n    }\n  }\n\n  /**\n   * DOM更新コールバック\n   * @param {*} payload\n   */\n  static updateElement(payload) {\n    const { element, value } = payload;\n    switch (element.tagName) {\n      case \"DIV\":\n        DOMUpdateHelper.updateDivElement(element, value);\n        break;\n      case \"SELECT\":\n        DOMUpdateHelper.updateSelectElement(element, value);\n        break;\n      case \"INPUT\":\n        DOMUpdateHelper.updateInputElement(element, value);\n        break;\n      case \"IMG\":\n        DOMUpdateHelper.updateImageElement(element, value);\n      default:\n        throw new Error(`Unsupported element tag: ${element.tagName}`);\n    }\n  }\n\n  static updateDivElement(element, value) {\n    element.setAttribute(\"data-value\", value);\n\n    const children = element.children;\n    for (const child of children) {\n      // ext属性を持つ子要素のみ再帰探索\n      if (!child.hasAttribute(\"ext\")) continue;\n      DOMUpdateHelper.updateElement({\n        element: child,\n        value: Utils.EvalGetValue(value, child.getAttribute(\"ext\"))\n      });\n    }\n  }\n\n  static updateInputElement(element, value) {\n    if (element.type === \"checkbox\") {\n      element.checked = value;\n      return;\n    }\n    if (element.type === \"radio\") {\n      element.checked = element.value === value;\n      return;\n    }\n    element.value = value;\n    return;\n  }\n\n  static updateSelectElement(element, value) {\n    const options = element.querySelectorAll(\"option\");\n    for (let i = 0; i < options.length; i++) {\n      options[i].selected = options[i].value === value;\n    }\n  }\n\n  static updateImageElement(element, value) {\n    element.src = value;\n  }\n}\nglobalThis.domUpdateHelper = DOMUpdateHelper;","/**\n * Unregister all ros pub/sub/params on unload page.\n **/\nwindow.addEventListener(\"unload\", async (e) => {\n  for (const element of publishButtons) {\n    eel.ros_unpublish(element.getAttribute(\"name\"));\n  }\n  for (const element of subscribeElements) {\n    eel.ros_unsubscribe(element.getAttribute(\"name\"));\n  }\n  for (const element of paramElements) {\n    eel.ros_unregister_param(element.getAttribute(\"name\"));\n  }\n});"],"names":["async","loadJsonFile","filepath","filename","replace","jsonCache","res","fetch","data","json","e","console","error","updateDescription","payload","element","detail","rowId","csvFilename","log","jsonData","rowData","find","row","id","querySelectorAll","forEach","field","textContent","dataset","columnName","initValidator","inputElement","errorFieldElement","name","schema","global","schemas","addEventListener","event","value","result","validate","target","valid","classList","remove","add","message","parse","_a","errors","dispatchWrappedEvent","originalEvent","customEventName","contains","customEvent","CustomEvent","bubbles","document","dispatchEvent","globalThis","PARAM_TYPES","Bool","Number","String","Object","Array","Utils","EvalGetValue","key","v","eval","EvalSetValue","newValue","structuredClone","dictFullPathAdd","dict","key_fullpath","current","startsWith","slice","pathParts","split","part","index","arrayMatch","match","_","arrayName","arrayIndex","length","elements","getElementsByClassName","el","domUpdateHelper","registerCallback","eventName","executeCallbacks","querySelector","clickWrappers","wrapper","hoverWrappers","leaveWrappers","paramElements","assert","getAttribute","ROS_EVENTS","Param","hasAttribute","updateElement","tagName","inputs","input","currentTarget","obj","ROSInterface","getParam","ParamSet","type","checked","ParamUpdated","i","publishes","pub","btn","ext","type_asserted","Publish","subscribeElements","Subscribe","SubscribedValue","topicElements","_DOMUpdateHelper","callback","updateCallbacks","has","get","push","set","updateDivElement","updateSelectElement","updateInputElement","updateImageElement","Error","setAttribute","children","child","options","selected","src","__publicField","WeakMap","DOMUpdateHelper","window","publishButtons","eel","ros_unpublish","ros_unsubscribe","ros_unregister_param"],"mappings":"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"}